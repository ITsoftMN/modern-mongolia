!function(e){"use strict";e.ThreeSixty=function(t,r){var n,a=this,o=[];a.$el=e(t),a.el=t,a.$el.data("ThreeSixty",a),a.init=function(){(n=e.extend({},e.ThreeSixty.defaultOptions,r)).disableSpin&&(n.currentFrame=1,n.endFrame=1),a.initProgress(),a.loadImages()},a.resize=function(){},a.initProgress=function(){a.$el.css({width:n.width+"px",height:n.height+"px","background-image":"none !important"}),n.styles&&a.$el.css(n.styles),a.responsive(),a.$el.find(n.progress).css({marginTop:n.height/2-15+"px"}),a.$el.find(n.progress).fadeIn("slow"),a.$el.find(n.imgList).hide()},a.loadImages=function(){var t,r,i,s;t=document.createElement("li"),s=n.zeroBased?0:1,r=n.imgArray?n.imgArray[n.loadedImages]:n.domain+n.imagePath+n.filePrefix+a.zeroPad(n.loadedImages+s)+n.ext+(a.browser.isIE()?"?"+(new Date).getTime():""),i=e("<img>").attr("src",r).addClass("previous-image").appendTo(t),o.push(i),a.$el.find(n.imgList).append(t),e(i).on("load",function(){a.imageLoaded()})},a.imageLoaded=function(){n.loadedImages+=1,e(n.progress+" span").text(Math.floor(n.loadedImages/n.totalFrames*100)+"%"),n.loadedImages>=n.totalFrames?(n.disableSpin&&o[0].removeClass("previous-image").addClass("current-image"),e(n.progress).fadeOut("slow",function(){e(this).hide(),a.showImages(),a.showNavigation()})):a.loadImages()},a.showImages=function(){a.$el.find(".txtC").fadeIn(),a.$el.find(n.imgList).fadeIn(),a.ready=!0,n.ready=!0,n.drag&&a.initEvents(),a.refresh(),a.initPlugins(),n.onReady(),setTimeout(function(){a.responsive()},50)},a.initPlugins=function(){e.each(n.plugins,function(t,r){if("function"!=typeof e[r])throw new Error(r+" not available.");e[r].call(a,a.$el,n)})},a.showNavigation=function(){var t,r,o,i;n.navigation&&!n.navigation_init&&(t=e("<div/>").attr("class","nav_bar"),r=e("<a/>").attr({href:"#",class:"nav_bar_next"}).html("next"),o=e("<a/>").attr({href:"#",class:"nav_bar_previous"}).html("previous"),i=e("<a/>").attr({href:"#",class:"nav_bar_play"}).html("play"),t.append(o),t.append(i),t.append(r),a.$el.prepend(t),r.on("mousedown touchstart",a.next),o.on("mousedown touchstart",a.previous),i.on("mousedown touchstart",a.play_stop),n.navigation_init=!0)},a.play_stop=function(t){t.preventDefault(),n.autoplay?(n.autoplay=!1,e(t.currentTarget).removeClass("nav_bar_stop").addClass("nav_bar_play"),clearInterval(n.play),n.play=null):(n.autoplay=!0,n.play=setInterval(a.moveToNextFrame,n.playSpeed),e(t.currentTarget).removeClass("nav_bar_play").addClass("nav_bar_stop"))},a.next=function(e){e&&e.preventDefault(),n.endFrame-=5,a.refresh()},a.previous=function(e){e&&e.preventDefault(),n.endFrame+=5,a.refresh()},a.play=function(e,t){var r=e||n.playSpeed,o=t||n.autoplayDirection;n.autoplayDirection=o,n.autoplay||(n.autoplay=!0,n.play=setInterval(a.moveToNextFrame,r))},a.stop=function(){n.autoplay&&(n.autoplay=!1,clearInterval(n.play),n.play=null)},a.moveToNextFrame=function(){1===n.autoplayDirection?n.endFrame-=1:n.endFrame+=1,a.refresh()},a.gotoAndPlay=function(e){if(n.disableWrap)n.endFrame=e,a.refresh();else{var t=Math.ceil(n.endFrame/n.totalFrames);0===t&&(t=1);var r,o=t>1?n.endFrame-(t-1)*n.totalFrames:n.endFrame,i=n.totalFrames-o;r=e-o>0?e-o<o+(n.totalFrames-e)?n.endFrame+(e-o):n.endFrame-(o+(n.totalFrames-e)):i+e>o-e?n.endFrame-(o-e):n.endFrame+(i+e),o!==e&&(n.endFrame=r,a.refresh())}},a.initEvents=function(){a.$el.on("mousedown touchstart touchmove touchend mousemove click",function(e){e.preventDefault(),"mousedown"===e.type&&1===e.which||"touchstart"===e.type?(n.pointerStartPosX=a.getPointerEvent(e).pageX,n.dragging=!0,n.onDragStart(n.currentFrame)):"touchmove"===e.type?a.trackPointer(e):"touchend"===e.type&&(n.dragging=!1,n.onDragStop(n.endFrame))}),e(document).on("mouseup",function(t){n.dragging=!1,n.onDragStop(n.endFrame),e(this).css("cursor","none")}),e(window).on("resize",function(e){a.responsive()}),e(document).on("mousemove",function(e){n.dragging?(e.preventDefault(),!a.browser.isIE&&n.showCursor&&a.$el.css("cursor","url(assets/images/hand_closed.png), auto")):!a.browser.isIE&&n.showCursor&&a.$el.css("cursor","url(assets/images/hand_open.png), auto"),a.trackPointer(e)}),e(window).resize(function(){a.resize()})},a.getPointerEvent=function(e){return e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:e},a.trackPointer=function(e){n.ready&&n.dragging&&(n.pointerEndPosX=a.getPointerEvent(e).pageX,n.monitorStartTime<(new Date).getTime()-n.monitorInt&&(n.pointerDistance=n.pointerEndPosX-n.pointerStartPosX,n.pointerDistance>0?n.endFrame=n.currentFrame+Math.ceil((n.totalFrames-1)*n.speedMultiplier*(n.pointerDistance/a.$el.width())):n.endFrame=n.currentFrame+Math.floor((n.totalFrames-1)*n.speedMultiplier*(n.pointerDistance/a.$el.width())),n.disableWrap&&(n.endFrame=Math.min(n.totalFrames-(n.zeroBased?1:0),n.endFrame),n.endFrame=Math.max(n.zeroBased?0:1,n.endFrame)),a.refresh(),n.monitorStartTime=(new Date).getTime(),n.pointerStartPosX=a.getPointerEvent(e).pageX))},a.refresh=function(){0===n.ticker&&(n.ticker=setInterval(a.render,Math.round(1e3/n.framerate)))},a.render=function(){var e;n.currentFrame!==n.endFrame?(e=n.endFrame<n.currentFrame?Math.floor(.1*(n.endFrame-n.currentFrame)):Math.ceil(.1*(n.endFrame-n.currentFrame)),a.hidePreviousFrame(),n.currentFrame+=e,a.showCurrentFrame(),a.$el.trigger("frameIndexChanged",[a.getNormalizedCurrentFrame(),n.totalFrames])):(window.clearInterval(n.ticker),n.ticker=0)},a.hidePreviousFrame=function(){o[a.getNormalizedCurrentFrame()].removeClass("current-image").addClass("previous-image")},a.showCurrentFrame=function(){o[a.getNormalizedCurrentFrame()].removeClass("previous-image").addClass("current-image")},a.getNormalizedCurrentFrame=function(){var e,t;return n.disableWrap?(e=Math.min(n.currentFrame,n.totalFrames-(n.zeroBased?1:0)),t=Math.min(n.endFrame,n.totalFrames-(n.zeroBased?1:0)),e=Math.max(e,n.zeroBased?0:1),t=Math.max(t,n.zeroBased?0:1),n.currentFrame=e,n.endFrame=t):0>(e=Math.ceil(n.currentFrame%n.totalFrames))&&(e+=n.totalFrames-(n.zeroBased?1:0)),e},a.getCurrentFrame=function(){return n.currentFrame},a.responsive=function(){n.responsive&&a.$el.css({height:a.$el.find(".current-image").first().css("height"),width:"100%"})},a.zeroPad=function(e){var t=Math.log(n.totalFrames)/Math.LN10,r=Math.round(1e3*t)/1e3;return function(e,t){var r=e.toString();if(n.zeroPadding)for(;r.length<t;)r="0"+r;return r}(e,Math.floor(r)+1)},a.browser={},a.browser.isIE=function(){var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return-1!==e},a.getConfig=function(){return n},e.ThreeSixty.defaultOptions={dragging:!1,ready:!1,pointerStartPosX:0,pointerEndPosX:0,pointerDistance:0,monitorStartTime:0,monitorInt:10,ticker:0,speedMultiplier:7,totalFrames:180,currentFrame:0,endFrame:0,loadedImages:0,framerate:60,domains:null,domain:"",parallel:!1,queueAmount:8,idle:0,filePrefix:"",ext:"png",height:300,width:300,styles:{},navigation:!1,autoplay:!1,autoplayDirection:1,disableSpin:!1,disableWrap:!1,responsive:!1,zeroPadding:!1,zeroBased:!1,plugins:[],showCursor:!1,drag:!0,onReady:function(){},onDragStart:function(){},onDragStop:function(){},imgList:".threesixty_images",imgArray:null,playSpeed:100},a.init()},e.fn.ThreeSixty=function(t){return Object.create(new e.ThreeSixty(this,t))}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){"use strict";function t(){}return t.prototype=e,new t}),function(e){"use strict";e.ThreeSixtyFullscreen=function(t,r){var n=this,a=t,o=e("<a href='#'>Fullscreen</a>"),i=["webkit","moz","ms","o",""];o.on("click",function(e){n.onClickHandler.apply(this,e)}),n.setStyles=function(){return o.css({"z-index":12,display:"block",position:"absolute",background:"url(img/fs.png) no-repeat",width:"20px",height:"20px","text-indent":"-99999px",right:"5px",bottom:"5px","background-position":"0px -20px"}),this},n.RunPrefixMethod=function(e,t){for(var r,n,a=0;a<i.length&&!e[r];){if(r=t,""===i[a]&&(r=r.substr(0,1).toLowerCase()+r.substr(1)),"undefined"!==(n=typeof e[r=i[a]+r]))return i=[i[a]],"function"===n?e[r]():e[r];a++}},n.init=function(){n.setStyles(),a.prepend(o)},n.onClickHandler=function(e){var t;if(void 0!==a.attr("id"))t=document.getElementById(a.attr("id"));else{if(void 0===a.parent().attr("id"))return!1;t=document.getElementById(a.parent().attr("id"))}n.toggleFullscreen(t)},n.toggleButton=function(){o.css({"background-position":"0px -20px"})},n.toggleFullscreen=function(e){n.RunPrefixMethod(document,"FullScreen")||n.RunPrefixMethod(document,"IsFullScreen")?n.RunPrefixMethod(document,"CancelFullScreen"):n.RunPrefixMethod(e,"RequestFullScreen"),n.toggleButton()},n.init()}}(jQuery);