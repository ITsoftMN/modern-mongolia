!function(t,i,e){function n(t,i){return typeof t===i}function s(){var t,i,e,s,o,r,a;for(var l in x){if(t=[],i=x[l],i.name&&(t.push(i.name.toLowerCase()),i.options&&i.options.aliases&&i.options.aliases.length))for(e=0;e<i.options.aliases.length;e++)t.push(i.options.aliases[e].toLowerCase());for(s=n(i.fn,"function")?i.fn():i.fn,o=0;o<t.length;o++)r=t[o],a=r.split("."),1===a.length?E[a[0]]=s:(!E[a[0]]||E[a[0]]instanceof Boolean||(E[a[0]]=new Boolean(E[a[0]])),E[a[0]][a[1]]=s),y.push((s?"":"no-")+a.join("-"))}}function o(t){var i=I.className,e=E._config.classPrefix||"";if(C&&(i=i.baseVal),E._config.enableJSClass){var n=new RegExp("(^|\\s)"+e+"no-js(\\s|$)");i=i.replace(n,"$1"+e+"js$2")}E._config.enableClasses&&(i+=" "+e+t.join(" "+e),C?I.className.baseVal=i:I.className=i)}function r(t){return t.replace(/([a-z])-([a-z])/g,function(t,i,e){return i+e.toUpperCase()}).replace(/^-/,"")}function a(t,i){return!!~(""+t).indexOf(i)}function l(){return"function"!=typeof i.createElement?i.createElement(arguments[0]):C?i.createElementNS.call(i,"http://www.w3.org/2000/svg",arguments[0]):i.createElement.apply(i,arguments)}function c(t,i){return function(){return t.apply(i,arguments)}}function p(t,i,e){var s;for(var o in t)if(t[o]in i)return e===!1?t[o]:(s=i[t[o]],n(s,"function")?c(s,e||i):s);return!1}function h(t){return t.replace(/([A-Z])/g,function(t,i){return"-"+i.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(){var t=i.body;return t||(t=l(C?"svg":"body"),t.fake=!0),t}function f(t,e,n,s){var o,r,a,c,p="modernizr",h=l("div"),f=d();if(parseInt(n,10))for(;n--;)a=l("div"),a.id=s?s[n]:p+(n+1),h.appendChild(a);return o=l("style"),o.type="text/css",o.id="s"+p,(f.fake?f:h).appendChild(o),f.appendChild(h),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(i.createTextNode(t)),h.id=p,f.fake&&(f.style.background="",f.style.overflow="hidden",c=I.style.overflow,I.style.overflow="hidden",I.appendChild(f)),r=e(h,t),f.fake?(f.parentNode.removeChild(f),I.style.overflow=c,I.offsetHeight):h.parentNode.removeChild(h),!!r}function u(i,n){var s=i.length;if("CSS"in t&&"supports"in t.CSS){for(;s--;)if(t.CSS.supports(h(i[s]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];s--;)o.push("("+h(i[s])+":"+n+")");return o=o.join(" or "),f("@supports ("+o+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return e}function m(t,i,s,o){function c(){h&&(delete L.style,delete L.modElem)}if(o=n(o,"undefined")?!1:o,!n(s,"undefined")){var p=u(t,s);if(!n(p,"undefined"))return p}for(var h,d,f,m,g,v=["modernizr","tspan"];!L.style;)h=!0,L.modElem=l(v.shift()),L.style=L.modElem.style;for(f=t.length,d=0;f>d;d++)if(m=t[d],g=L.style[m],a(m,"-")&&(m=r(m)),L.style[m]!==e){if(o||n(s,"undefined"))return c(),"pfx"==i?m:!0;try{L.style[m]=s}catch(y){}if(L.style[m]!=g)return c(),"pfx"==i?m:!0}return c(),!1}function g(t,i,e,s,o){var r=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+_.join(r+" ")+r).split(" ");return n(i,"string")||n(i,"undefined")?m(a,i,s,o):(a=(t+" "+S.join(r+" ")+r).split(" "),p(a,i,e))}function v(t,i,n){return g(t,e,e,i,n)}var y=[],x=[],w={_version:"3.1.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,i){var e=this;setTimeout(function(){i(e[t])},0)},addTest:function(t,i,e){x.push({name:t,fn:i,options:e})},addAsyncTest:function(t){x.push({name:null,fn:t})}},E=function(){};E.prototype=w,E=new E;var I=i.documentElement,C="svg"===I.nodeName.toLowerCase(),b="Moz O ms Webkit",_=w._config.usePrefixes?b.split(" "):[];w._cssomPrefixes=_;var P=function(i){var n,s=prefixes.length,o=t.CSSRule;if("undefined"==typeof o)return e;if(!i)return!1;if(i=i.replace(/^@/,""),n=i.replace(/-/g,"_").toUpperCase()+"_RULE",n in o)return"@"+i;for(var r=0;s>r;r++){var a=prefixes[r],l=a.toUpperCase()+"_"+n;if(l in o)return"@-"+a.toLowerCase()+"-"+i}return!1};w.atRule=P;var S=w._config.usePrefixes?b.toLowerCase().split(" "):[];w._domPrefixes=S;var T={elem:l("modernizr")};E._q.push(function(){delete T.elem});var L={style:T.elem.style};E._q.unshift(function(){delete L.style}),w.testAllProps=g,w.prefixed=function(t,i,e){return 0===t.indexOf("@")?P(t):(-1!=t.indexOf("-")&&(t=r(t)),i?g(t,i,e):g(t,"pfx"))},w.testAllProps=v,E.addTest("csstransitions",v("transition","all",!0)),s(),o(y),delete w.addTest,delete w.addAsyncTest;for(var M=0;M<E._q.length;M++)E._q[M]();t.Modernizr=E}(window,document),function(t){"use strict";function i(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function e(t,i){var e=n(t,i)?o:s;e(t,i)}var n,s,o;"classList"in document.documentElement?(n=function(t,i){return t.classList.contains(i)},s=function(t,i){t.classList.add(i)},o=function(t,i){t.classList.remove(i)}):(n=function(t,e){return i(e).test(t.className)},s=function(t,i){n(t,i)||(t.className=t.className+" "+i)},o=function(t,e){t.className=t.className.replace(i(e)," ")});var r={hasClass:n,addClass:s,removeClass:o,toggleClass:e,has:n,add:s,remove:o,toggle:e};"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r:t.classie=r}(window),function(t){"use strict";function i(t,i){var e=!0;return function(n){e&&(e=!1,setTimeout(function(){e=!0},i),t(n))}}function e(t){for(var i=t.nextSibling;i&&1!=i.nodeType;)i=i.nextSibling;return i}function n(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function s(t,i){this.gridEl=t,this.options=n({},this.options),n(this.options,i),this.items=[].slice.call(this.gridEl.querySelectorAll(".grid-item")),this.previewEl=e(this.gridEl),this.isExpanded=!1,this.isAnimating=!1,this.closeCtrl=this.previewEl.querySelector("button.action-close"),this.previewDescriptionEl=this.previewEl.querySelector(".description-preview"),this._init()}var o={transitions:Modernizr.csstransitions},r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},a=r[Modernizr.prefixed("transition")],l=function(t,i){var e=function(t){if(o.transitions){if(t.target!=this)return;this.removeEventListener(a,e)}i&&"function"==typeof i&&i.call(this)};o.transitions?t.addEventListener(a,e):e()};s.prototype.options={pagemargin:0,imgPosition:{x:1,y:1},onInit:function(t){return!1},onResize:function(t){return!1},onOpenItem:function(t,i){return!1},onCloseItem:function(t,i){return!1},onExpand:function(){return!1}},s.prototype._init=function(){this.options.onInit(this);var t=this;imagesLoaded(this.gridEl,function(){new Masonry(t.gridEl,{itemSelector:".grid-item",isFitWidth:!0}),classie.add(t.gridEl,"grid--loaded"),t._initEvents(),t._setOriginal(),t._setClone()})},s.prototype._initEvents=function(){var e=this,n=null!==document.ontouchstart?"click":"touchstart";this.items.forEach(function(t){var i=function(n){n.preventDefault(),e._openItem(n,t),t.removeEventListener("touchend",i)},s=function(e){t.removeEventListener("touchend",i)},o=function(){t.addEventListener("touchend",i),t.addEventListener("touchmove",s)};t.addEventListener(n,function(i){"click"===n?(i.preventDefault(),e._openItem(i,t)):o()})}),this.closeCtrl.addEventListener("click",function(){e._closeItem()}),t.addEventListener("resize",i(function(t){e.options.onResize(e)},10))},s.prototype._openItem=function(t,i){if(!this.isAnimating&&!this.isExpanded){this.isAnimating=!0,this.isExpanded=!0;var e=i.querySelector("img"),n=e.getBoundingClientRect();this.current=this.items.indexOf(i),this._setOriginal(i.querySelector("a").getAttribute("href")),this.options.onOpenItem(this,i),this._setClone(e.src,{width:e.offsetWidth,height:e.offsetHeight,left:n.left,top:n.top}),classie.add(i,"grid-item-current");var s=this._getWinSize(),o=i.getAttribute("data-size").split("x"),r={width:o[0],height:o[1]},a=(this.options.imgPosition.x>0?1-Math.abs(this.options.imgPosition.x):Math.abs(this.options.imgPosition.x))*s.width+this.options.imgPosition.x*s.width/2-n.left-.5*e.offsetWidth,c=(this.options.imgPosition.y>0?1-Math.abs(this.options.imgPosition.y):Math.abs(this.options.imgPosition.y))*s.height+this.options.imgPosition.y*s.height/2-n.top-.5*e.offsetHeight,p=Math.min(Math.min(s.width*Math.abs(this.options.imgPosition.x)-this.options.pagemargin,r.width-this.options.pagemargin)/e.offsetWidth,Math.min(s.height*Math.abs(this.options.imgPosition.y)-this.options.pagemargin,r.height-this.options.pagemargin)/e.offsetHeight);this.cloneImg.style.WebkitTransform="translate3d("+a+"px, "+c+"px, 0) scale3d("+p+", "+p+", 1)",this.cloneImg.style.transform="translate3d("+a+"px, "+c+"px, 0) scale3d("+p+", "+p+", 1)";var h=i.querySelector(".description");h&&(this.previewDescriptionEl.innerHTML=h.innerHTML);var d=this;setTimeout(function(){classie.add(d.previewEl,"preview-open"),d.options.onExpand()},0),l(this.cloneImg,function(){imagesLoaded(d.originalImg,function(){classie.add(d.previewEl,"preview-image-loaded"),d.originalImg.style.opacity=1,l(d.originalImg,function(){d.cloneImg.style.opacity=0,d.cloneImg.style.WebkitTransform="translate3d(0,0,0) scale3d(1,1,1)",d.cloneImg.style.transform="translate3d(0,0,0) scale3d(1,1,1)",d.isAnimating=!1})})})}},s.prototype._setOriginal=function(t){t||(this.originalImg=document.createElement("img"),this.originalImg.className="original",this.originalImg.style.opacity=0,this.originalImg.style.maxWidth="calc("+parseInt(100*Math.abs(this.options.imgPosition.x))+"vw - "+this.options.pagemargin+"px)",this.originalImg.style.maxHeight="calc("+parseInt(100*Math.abs(this.options.imgPosition.y))+"vh - "+this.options.pagemargin+"px)",this.originalImg.style.WebkitTransform="translate3d(0,0,0) scale3d(1,1,1)",this.originalImg.style.transform="translate3d(0,0,0) scale3d(1,1,1)",t="",this.previewEl.appendChild(this.originalImg)),this.originalImg.setAttribute("src",t)},s.prototype._setClone=function(t,i){t?(this.cloneImg.style.opacity=1,this.cloneImg.style.width=i.width+"px",this.cloneImg.style.height=i.height+"px",this.cloneImg.style.top=i.top+"px",this.cloneImg.style.left=i.left+"px"):(this.cloneImg=document.createElement("img"),this.cloneImg.className="clone",t="",this.cloneImg.style.opacity=0,this.previewEl.appendChild(this.cloneImg)),this.cloneImg.setAttribute("src",t)},s.prototype._closeItem=function(){if(this.isExpanded&&!this.isAnimating){this.isExpanded=!1,this.isAnimating=!0;var t=this.items[this.current],i=t.querySelector("img"),e=i.getBoundingClientRect(),n=this;classie.remove(this.previewEl,"preview-open"),classie.remove(this.previewEl,"preview-image-loaded"),this.options.onCloseItem(this,t),classie.add(this.originalImg,"animate");var s=this._getWinSize(),o=e.left+i.offsetWidth/2-((this.options.imgPosition.x>0?1-Math.abs(this.options.imgPosition.x):Math.abs(this.options.imgPosition.x))*s.width+this.options.imgPosition.x*s.width/2),r=e.top+i.offsetHeight/2-((this.options.imgPosition.y>0?1-Math.abs(this.options.imgPosition.y):Math.abs(this.options.imgPosition.y))*s.height+this.options.imgPosition.y*s.height/2),a=i.offsetWidth/this.originalImg.offsetWidth;this.originalImg.style.WebkitTransform="translate3d("+o+"px, "+r+"px, 0) scale3d("+a+", "+a+", 1)",this.originalImg.style.transform="translate3d("+o+"px, "+r+"px, 0) scale3d("+a+", "+a+", 1)",l(this.originalImg,function(){n.previewDescriptionEl.innerHTML="",classie.remove(t,"grid-item-current"),setTimeout(function(){n.originalImg.style.opacity=0},60),l(n.originalImg,function(){classie.remove(n.originalImg,"animate"),n.originalImg.style.WebkitTransform="translate3d(0,0,0) scale3d(1,1,1)",n.originalImg.style.transform="translate3d(0,0,0) scale3d(1,1,1)",n.isAnimating=!1})})}},s.prototype._getWinSize=function(){return{width:document.documentElement.clientWidth,height:t.innerHeight}},t.GridFx=s}(window);